import{c as f,x as e,y as u,q as w,l as C,o as M,a as $,b as B,a6 as E,N as S,u as z,e as p,d as m,a7 as A}from"./index-Cn49cqZF.js";import{U as D}from"./Button-D3AMkBxW.js";import{C as _}from"./calendar-CbQjGfJm.js";const I=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],b=f("bell",I);const L=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],R=f("menu",L);const q=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H=f("search",q);function J({variant:n="default",padding:i,className:s="",children:c,...l}){const o=["card",`card-${n}`,s].filter(Boolean).join(" "),d=i?{padding:i}:void 0;return e.jsx("div",{className:o,style:d,...l,children:c})}function K({className:n="",children:i,...s}){return e.jsx("div",{className:`card-body ${n}`,...s,children:i})}function F({variant:n="gray",size:i="md",dot:s=!1,className:c="",children:l,...o}){const d=["badge",`badge-${n}`,`badge-${i}`,s&&"badge-dot",c].filter(Boolean).join(" ");return e.jsxs("span",{className:d,...o,children:[s&&e.jsx("span",{className:"badge-dot-indicator"}),l]})}function O(){const[n,i]=u.useState([]),[s,c]=u.useState(0),[l,o]=u.useState(!1),d=u.useRef(null);u.useEffect(()=>{const a=w($(m,"notifications"),M("createdAt","desc"),C(20)),t=B(a,j=>{const h=j.docs.map(r=>({id:r.id,...r.data()}));i(h),c(h.filter(r=>!r.read).length)});return()=>t()},[]),u.useEffect(()=>{const a=t=>{d.current&&!d.current.contains(t.target)&&o(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const g=async a=>{try{await z(p(m,"notifications",a),{read:!0})}catch(t){console.error("Error marking notification as read:",t)}},y=async()=>{try{const a=A(m);n.filter(t=>!t.read).forEach(t=>{a.update(p(m,"notifications",t.id),{read:!0})}),await a.commit()}catch(a){console.error("Error marking all as read:",a)}},k=a=>a==="booking_confirmed"?e.jsx(_,{size:16}):e.jsx(D,{size:16}),v=a=>{if(!a)return"";const t=a.toDate?a.toDate():new Date(a),h=new Date-t,r=Math.floor(h/6e4),x=Math.floor(h/36e5),N=Math.floor(h/864e5);return r<1?"Just now":r<60?`${r}m ago`:x<24?`${x}h ago`:N<7?`${N}d ago`:t.toLocaleDateString("en-GB",{day:"numeric",month:"short"})};return e.jsxs("div",{className:"notification-bell",ref:d,children:[e.jsxs("button",{className:"notification-bell-btn",onClick:()=>o(!l),children:[e.jsx(b,{size:20}),s>0&&e.jsx("span",{className:"notification-badge",children:s>9?"9+":s})]}),l&&e.jsxs("div",{className:"notification-dropdown",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx("h4",{children:"Notifications"}),s>0&&e.jsxs("button",{className:"mark-all-read",onClick:y,children:[e.jsx(E,{size:14}),"Mark all read"]})]}),e.jsx("div",{className:"notification-list",children:n.length===0?e.jsxs("div",{className:"notification-empty",children:[e.jsx(b,{size:24}),e.jsx("p",{children:"No notifications yet"})]}):n.map(a=>e.jsxs(S,{to:a.candidateId?`/candidates/${a.candidateId}`:"#",className:`notification-item ${a.read?"":"unread"}`,onClick:()=>{g(a.id),o(!1)},children:[e.jsx("div",{className:"notification-icon",children:k(a.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("p",{className:"notification-title",children:a.title}),e.jsx("p",{className:"notification-message",children:a.message}),e.jsx("span",{className:"notification-time",children:v(a.createdAt)})]}),!a.read&&e.jsx("span",{className:"notification-dot"})]},a.id))})]})]})}function P({title:n,subtitle:i,onMenuClick:s,actions:c}){return e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"header-menu-btn",onClick:s,"aria-label":"Toggle menu",children:e.jsx(R,{size:20})}),e.jsxs("div",{className:"header-title-group",children:[e.jsx("h1",{className:"header-title",children:n}),i&&e.jsx("p",{className:"header-subtitle",children:i})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"header-search",children:[e.jsx(H,{size:18,className:"header-search-icon"}),e.jsx("input",{type:"search",placeholder:"Search...",className:"header-search-input"}),e.jsx("kbd",{className:"header-search-kbd",children:"âŒ˜K"})]}),e.jsx(O,{}),c&&e.jsx("div",{className:"header-actions",children:c})]})]})}export{F as B,J as C,P as H,H as S,K as a,b};
