const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eye-BA63J-rh.js","assets/index-BsqyUQ-T.js","assets/index-DX7dYFDL.css"])))=>i.map(i=>d[i]);
import{c as U,f as Ee,a as ze,d as de,a8 as Le,s as Me,y as l,x as e,a6 as he,K as ne,z as ge,S as ee,J as se,B as $e,H as Pe,L as _e,C as Be,N as Oe,a9 as qe,F as Ue}from"./index-BsqyUQ-T.js";import{B as w,U as be}from"./Button-CqrnczKR.js";import{H as Fe,C as L,a as M,B as ue}from"./Header-DHxsPJW_.js";import{F as me,E as Ve,C as We}from"./CandidateFormModal-V9hZomdZ.js";import{s as He,c as Re,d as Ge,g as Je,e as ae,b as Ye,f as Ke,h as Qe,u as pe,l as Xe,i as Ze,j as es,k as ss,m as as}from"./candidates-CtRs8jHu.js";import{M as we}from"./Modal-Dtgu5vaO.js";import{s as ts,b as is,f as ns,T as ls,g as cs,A as je,a as os,M as xe}from"./whatsapp-BWXtPv_u.js";import{C as $}from"./calendar-D0mgYGwP.js";import{E as rs}from"./eye-BA63J-rh.js";import{I as ds,D as hs,L as us,u as ye,c as ms,b as ps,g as js,d as xs,i as vs}from"./interviews-BmxVB-1k.js";import{C as H}from"./clock-XFMRPosc.js";import{M as ie}from"./map-pin-CQ0Eh93Y.js";import{P as ke}from"./phone-DrkzSOf9.js";import{P as ve,T as te}from"./trash-2-CVkROpnB.js";import{M as Ne}from"./mail-b6VX8eeA.js";import"./jobs-DLAz6jg1.js";import"./sanitize-DHny7aVF.js";const Ns=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fs=U("arrow-left",Ns);const gs=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fe=U("copy",gs);const bs=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ws=U("link-2",bs);const ys=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ks=U("loader-circle",ys);const Cs=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ts=U("pen-line",Cs);const Ss=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ce=U("send",Ss);function Is(){const c="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789";let m="";for(let i=0;i<12;i++)m+=c.charAt(Math.floor(Math.random()*c.length));return m}async function Ds({candidateId:c,candidateName:m,type:i="interview",jobId:o=null,jobTitle:g=null,location:t=null,expiryDays:r=7}){const p=Is(),n=new Date;n.setDate(n.getDate()+r);const y={token:p,candidateId:c,candidateName:m,type:i,jobId:o,jobTitle:g,location:t,expiresAt:n,used:!1,createdAt:Me()};await Ee(ze(de,"bookingLinks"),y);const{setDoc:h,doc:v}=await Le(async()=>{const{setDoc:k,doc:C}=await import("./eye-BA63J-rh.js").then(j=>j.i);return{setDoc:k,doc:C}},__vite__mapDeps([0,1,2]));return await h(v(de,"bookingLinks",p),y),{token:p,url:As(p),expiresAt:n,type:i}}function As(c){return`${window.location.origin+window.location.pathname.replace(/\/[^/]*$/,"")}/book/${c}`}function Es({candidateName:c,type:m,jobTitle:i,location:o,bookingUrl:g}){let r=`Hi ${c.split(" ")[0]},

`;return r+=`Thanks for your application to Allied Pharmacies!

`,m==="interview"?r+="We'd like to invite you to an interview":r+="We'd like to invite you to a trial shift",i&&(r+=` for the ${i} position`),o&&(r+=` at ${o}`),r+=`.

`,r+=`ðŸ“… Please choose a time that suits you:
`,r+=`${g}

`,r+=`This link will expire in 7 days.

`,r+=`Looking forward to meeting you!

`,r+="Allied Recruitment Team",r}function zs({isOpen:c,onClose:m,candidate:i,additionalData:o={}}){const[g,t]=l.useState([]),[r,p]=l.useState(""),[n,y]=l.useState("all"),[h,v]=l.useState(""),[k,C]=l.useState(!0),[j,A]=l.useState(!1),[E,d]=l.useState(!0),[x,N]=l.useState(!1),[f,P]=l.useState("interview"),[z,R]=l.useState(""),[_,G]=l.useState(!1),[T,F]=l.useState(null);l.useEffect(()=>{const a=ts(b=>{t(b),d(!1)});return()=>a()},[]);const B=i?is(i,o):{},J=n==="all"?g:g.filter(a=>a.category===n),I=g.find(a=>a.id===r);l.useEffect(()=>{if(I){const a=ns(I.content,B);v(a),C(!0)}},[r,I]),l.useEffect(()=>{c&&(p(""),y("all"),v(""),C(!0),A(!1),N(!1),F(null),P("interview"),R(""))},[c]);const X=a=>{p(a),N(!1),F(null)},V=async()=>{if(i){G(!0);try{const a=await Ds({candidateId:i.id,candidateName:`${i.firstName} ${i.lastName}`,type:f,jobId:o.jobId||null,jobTitle:o.jobTitle||null,location:z||null});F(a);const b=Es({candidateName:`${i.firstName} ${i.lastName}`,type:f,jobTitle:o.jobTitle||null,location:z||null,bookingUrl:a.url});v(b),p("")}catch(a){console.error("Error generating booking link:",a),alert("Failed to generate booking link. Please try again.")}finally{G(!1)}}},O=()=>{if(!i?.phone||!h.trim())return;const a=os(i.phone,h);window.open(a,"_blank"),m()},Y=async()=>{try{await navigator.clipboard.writeText(h),A(!0),setTimeout(()=>A(!1),2e3)}catch(a){console.error("Failed to copy:",a)}},Z=async()=>{if(T)try{await navigator.clipboard.writeText(T.url),alert("Booking link copied!")}catch(a){console.error("Failed to copy link:",a)}},K=()=>{if(!I)return h;let a=I.content;return je.forEach(({key:b})=>{const W=B[b],Q=new RegExp(`\\{\\{${b}\\}\\}`,"g");W?a=a.replace(Q,`<span class="placeholder-filled">${W}</span>`):a=a.replace(Q,`<span class="placeholder-empty">{{${b}}}</span>`)}),a};return i?e.jsx(we,{isOpen:c,onClose:m,title:"Send WhatsApp Message",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:m,children:"Cancel"}),e.jsx(w,{variant:"outline",leftIcon:j?e.jsx(he,{size:16}):e.jsx(fe,{size:16}),onClick:Y,disabled:!h.trim(),children:j?"Copied!":"Copy"}),e.jsx(w,{leftIcon:e.jsx(Ce,{size:16}),onClick:O,disabled:!h.trim(),className:"whatsapp-send-btn",children:"Send via WhatsApp"})]}),children:e.jsxs("div",{className:"whatsapp-modal-content",children:[e.jsxs("div",{className:"whatsapp-recipient",children:[e.jsxs("div",{className:"whatsapp-recipient-avatar",children:[i.firstName?.[0],i.lastName?.[0]]}),e.jsxs("div",{className:"whatsapp-recipient-info",children:[e.jsxs("span",{className:"whatsapp-recipient-name",children:[i.firstName," ",i.lastName]}),e.jsx("span",{className:"whatsapp-recipient-phone",children:i.phone})]})]}),e.jsxs("div",{className:"whatsapp-quick-actions",children:[e.jsx("label",{className:"whatsapp-label",children:"Quick Actions"}),e.jsxs("div",{className:"whatsapp-quick-btns",children:[e.jsxs("button",{className:`whatsapp-quick-btn ${x&&f==="interview"?"active":""}`,onClick:()=>{N(!0),P("interview"),p("")},children:[e.jsx($,{size:16}),"Invite to Interview"]}),e.jsxs("button",{className:`whatsapp-quick-btn ${x&&f==="trial"?"active":""}`,onClick:()=>{N(!0),P("trial"),p("")},children:[e.jsx($,{size:16}),"Invite to Trial"]})]})]}),x&&e.jsxs("div",{className:"whatsapp-booking-options",children:[e.jsxs("div",{className:"booking-option-row",children:[e.jsxs("div",{className:"booking-option-field",children:[e.jsx("label",{children:"Type"}),e.jsxs("select",{value:f,onChange:a=>P(a.target.value),children:[e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"trial",children:"Trial Shift"})]})]}),e.jsxs("div",{className:"booking-option-field",children:[e.jsx("label",{children:"Location (optional)"}),e.jsx("input",{type:"text",value:z,onChange:a=>R(a.target.value),placeholder:"e.g., Manchester Branch"})]})]}),e.jsx(w,{onClick:V,disabled:_,leftIcon:_?e.jsx(ks,{size:16,className:"spinning"}):e.jsx(ws,{size:16}),children:_?"Generating...":"Generate Booking Link"}),T&&e.jsxs("div",{className:"booking-link-generated",children:[e.jsxs("div",{className:"booking-link-success",children:[e.jsx(he,{size:16}),"Booking link created!"]}),e.jsxs("div",{className:"booking-link-url",children:[e.jsx("code",{children:T.url}),e.jsx("button",{onClick:Z,children:e.jsx(fe,{size:14})})]}),e.jsxs("p",{className:"booking-link-expiry",children:["Expires: ",T.expiresAt.toLocaleDateString("en-GB")]})]})]}),x&&e.jsx("div",{className:"whatsapp-divider",children:e.jsx("span",{children:"or choose a template"})}),e.jsxs("div",{className:"whatsapp-templates-section",children:[e.jsxs("div",{className:"whatsapp-templates-header",children:[e.jsx("label",{className:"whatsapp-label",children:"Choose a template"}),e.jsxs("select",{className:"whatsapp-category-select",value:n,onChange:a=>y(a.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),ls.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),E?e.jsx("div",{className:"whatsapp-templates-loading",children:"Loading templates..."}):J.length===0?e.jsx("div",{className:"whatsapp-templates-empty",children:"No templates found. Create templates in Settings."}):e.jsx("div",{className:"whatsapp-templates-grid",children:J.map(a=>e.jsxs("button",{className:`whatsapp-template-card ${r===a.id?"selected":""}`,onClick:()=>X(a.id),children:[e.jsx("span",{className:"whatsapp-template-name",children:a.name}),e.jsx("span",{className:"whatsapp-template-category",children:cs(a.category)})]},a.id))})]}),e.jsxs("div",{className:"whatsapp-message-section",children:[e.jsxs("div",{className:"whatsapp-message-header",children:[e.jsx("label",{className:"whatsapp-label",children:"Message"}),e.jsxs("div",{className:"whatsapp-message-toggle",children:[e.jsxs("button",{className:`whatsapp-toggle-btn ${k?"active":""}`,onClick:()=>C(!0),children:[e.jsx(rs,{size:14}),"Preview"]}),e.jsxs("button",{className:`whatsapp-toggle-btn ${k?"":"active"}`,onClick:()=>C(!1),children:[e.jsx(Ts,{size:14}),"Edit"]})]})]}),k?e.jsx("div",{className:"whatsapp-message-preview",dangerouslySetInnerHTML:{__html:(T?h:K()).replace(/\n/g,"<br>")}}):e.jsx(ne,{value:h,onChange:a=>v(a.target.value),rows:8,placeholder:"Type your message..."})]}),!k&&!T&&e.jsxs("div",{className:"whatsapp-placeholders-help",children:[e.jsx("span",{className:"whatsapp-placeholders-label",children:"Available placeholders:"}),e.jsx("div",{className:"whatsapp-placeholders-list",children:je.slice(0,6).map(a=>e.jsx("code",{className:"whatsapp-placeholder-tag",onClick:()=>v(b=>b+`{{${a.key}}}`),title:`Insert {{${a.key}}}`,children:`{{${a.key}}}`},a.key))})]})]})}):null}function Ls({isOpen:c,onClose:m,candidate:i,existingInterview:o=null,onSuccess:g}){const{user:t,userProfile:r}=ge(),p=!!o,[n,y]=l.useState({type:"interview",date:"",time:"",duration:30,locationType:"in_person",location:"",interviewerName:"",interviewerPhone:"",notes:""}),[h,v]=l.useState({}),[k,C]=l.useState(!1);l.useEffect(()=>{if(o){const d=o.dateTime?.toDate?o.dateTime.toDate():new Date(o.dateTime);y({type:o.type||"interview",date:d.toISOString().split("T")[0],time:d.toTimeString().slice(0,5),duration:o.duration||30,locationType:o.locationType||"in_person",location:o.location||"",interviewerName:o.interviewerName||"",interviewerPhone:o.interviewerPhone||"",notes:o.notes||""})}else{const d=new Date;d.setDate(d.getDate()+1),y({type:"interview",date:d.toISOString().split("T")[0],time:"10:00",duration:30,locationType:"in_person",location:"",interviewerName:r?.displayName||"",interviewerPhone:"",notes:""})}v({})},[o,c,r]);const j=d=>{const{name:x,value:N}=d.target;y(f=>({...f,[x]:N})),h[x]&&v(f=>({...f,[x]:null}))},A=()=>{const d={};if(!n.date)d.date="Date is required";else{const x=new Date(n.date),N=new Date;N.setHours(0,0,0,0),x<N&&(d.date="Date cannot be in the past")}return n.time||(d.time="Time is required"),n.locationType==="in_person"&&!n.location.trim()&&(d.location="Location is required for in-person meetings"),v(d),Object.keys(d).length===0},E=async d=>{if(d.preventDefault(),!(!A()||!i)){C(!0);try{const x=new Date(`${n.date}T${n.time}`),N={candidateId:i.id,candidateName:`${i.firstName} ${i.lastName}`,candidatePhone:i.phone,candidateEmail:i.email,jobId:i.jobId,jobTitle:i.jobTitle,type:n.type,dateTime:x,duration:parseInt(n.duration),locationType:n.locationType,location:n.locationType==="in_person"?n.location:n.locationType,interviewerName:n.interviewerName,interviewerPhone:n.interviewerPhone,notes:n.notes};p?await ye(o.id,N,t.uid,r?.displayName):await ms(N,t.uid,r?.displayName),g?.(),m()}catch(x){console.error("Error scheduling interview:",x)}finally{C(!1)}}};return i?e.jsx(we,{isOpen:c,onClose:m,title:p?"Edit Interview":"Schedule Interview",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:m,disabled:k,children:"Cancel"}),e.jsx(w,{onClick:E,loading:k,children:p?"Update Interview":"Schedule Interview"})]}),children:e.jsxs("form",{onSubmit:E,className:"schedule-form",children:[e.jsxs("div",{className:"schedule-candidate-info",children:[e.jsxs("div",{className:"schedule-candidate-avatar",children:[i.firstName?.[0],i.lastName?.[0]]}),e.jsxs("div",{className:"schedule-candidate-details",children:[e.jsxs("span",{className:"schedule-candidate-name",children:[i.firstName," ",i.lastName]}),e.jsx("span",{className:"schedule-candidate-job",children:i.jobTitle||"No position assigned"})]})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Type",name:"type",value:n.type,onChange:j,options:ds})}),e.jsxs("div",{className:"schedule-form-row schedule-form-row-2col",children:[e.jsxs("div",{className:"schedule-field",children:[e.jsxs("label",{className:"schedule-label",children:[e.jsx($,{size:16}),"Date"]}),e.jsx("input",{type:"date",name:"date",value:n.date,onChange:j,className:`schedule-input ${h.date?"schedule-input-error":""}`}),h.date&&e.jsx("span",{className:"schedule-error",children:h.date})]}),e.jsxs("div",{className:"schedule-field",children:[e.jsxs("label",{className:"schedule-label",children:[e.jsx(H,{size:16}),"Time"]}),e.jsx("input",{type:"time",name:"time",value:n.time,onChange:j,className:`schedule-input ${h.time?"schedule-input-error":""}`}),h.time&&e.jsx("span",{className:"schedule-error",children:h.time})]})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Duration",name:"duration",value:n.duration,onChange:j,options:hs})}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Location Type",name:"locationType",value:n.locationType,onChange:j,options:us})}),n.locationType==="in_person"&&e.jsx("div",{className:"schedule-form-row",children:e.jsx(se,{label:"Address",name:"location",value:n.location,onChange:j,placeholder:"e.g., 123 High Street, Manchester M1 1AA",leftIcon:e.jsx(ie,{size:16}),error:h.location})}),e.jsx("div",{className:"schedule-section-title",children:"Interviewer Details (Optional)"}),e.jsxs("div",{className:"schedule-form-row schedule-form-row-2col",children:[e.jsx(se,{label:"Interviewer Name",name:"interviewerName",value:n.interviewerName,onChange:j,placeholder:"Who will conduct the interview?",leftIcon:e.jsx(be,{size:16})}),e.jsx(se,{label:"Interviewer Phone",name:"interviewerPhone",value:n.interviewerPhone,onChange:j,placeholder:"Contact number",leftIcon:e.jsx(ke,{size:16})})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ne,{label:"Notes (Optional)",name:"notes",value:n.notes,onChange:j,placeholder:"Any special instructions or notes...",rows:3})})]})}):null}function Qs(){const{id:c}=$e(),m=Pe(),{toggleMobileMenu:i}=_e(),{user:o,userProfile:g}=ge(),[t,r]=l.useState(null),[p,n]=l.useState([]),[y,h]=l.useState([]),[v,k]=l.useState([]),[C,j]=l.useState(!0),[A,E]=l.useState(null),[d,x]=l.useState("activity"),[N,f]=l.useState(!1),[P,z]=l.useState(!1),[R,_]=l.useState(!1),[G,T]=l.useState(!1),[F,B]=l.useState(null),[J,I]=l.useState(!1),[X,V]=l.useState(!1),[O,Y]=l.useState(""),[Z,K]=l.useState(!1);l.useEffect(()=>{if(!c)return;j(!0),E(null);const s=He(c,q=>{q?(r(q),j(!1)):(E("Candidate not found"),j(!1))}),u=Re(c,n),S=Ge(c,h),D=ps(c,k);return()=>{s(),u(),S(),D()}},[c]),l.useEffect(()=>{const s=()=>f(!1);return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const a=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",b=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"Unknown",W=s=>{if(!s)return"";const u=s.toDate?s.toDate():new Date(s),D=new Date-u,q=Math.floor(D/6e4),oe=Math.floor(D/36e5),re=Math.floor(D/864e5);return q<1?"Just now":q<60?`${q}m ago`:oe<24?`${oe}h ago`:re<7?`${re}d ago`:b(s)},Q=async s=>{if(!t||t.status===s){f(!1);return}try{const u=t.status;await pe(c,{status:s}),await Xe(c,u,s,o.uid,g?.displayName)}catch(u){console.error("Error updating status:",u)}f(!1)},Te=async()=>{if(O.trim()){K(!0);try{await Ze(c,O.trim(),o.uid,g?.displayName),Y("")}catch(s){console.error("Error adding note:",s)}finally{K(!1)}}},Se=async s=>{try{await es(c,s)}catch(u){console.error("Error deleting note:",u)}},le=async(s,u)=>{try{await ye(s,{status:u},o.uid,g?.displayName)}catch(S){console.error("Error updating interview status:",S)}},Ie=async(s,u)=>{I(!0);try{let S={};u&&(S=await ss(u,c)),await pe(c,{...s,...S}),z(!1)}catch(S){console.error("Error updating candidate:",S)}finally{I(!1)}},De=async()=>{try{await as(c),m("/candidates")}catch(s){console.error("Error deleting candidate:",s)}},Ae=s=>{switch(s){case"status_change":return H;case"note_added":return xe;case"cv_uploaded":return me;case"interview_scheduled":return $;default:return H}};if(C)return e.jsxs("div",{className:"candidate-detail-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading candidate..."})]});if(A||!t)return e.jsxs("div",{className:"candidate-detail-error",children:[e.jsx(Be,{size:48}),e.jsx("h2",{children:"Candidate Not Found"}),e.jsx("p",{children:"The candidate you're looking for doesn't exist or has been deleted."}),e.jsx(w,{onClick:()=>m("/candidates"),children:"Back to Candidates"})]});const ce=Je(t.status);return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{title:ae(t),subtitle:t.jobTitle||"No position assigned",onMenuClick:i,actions:e.jsxs("div",{className:"candidate-detail-actions",children:[e.jsx(w,{variant:"outline",leftIcon:e.jsx(ve,{size:16}),onClick:()=>z(!0),children:"Edit"}),e.jsx(w,{variant:"danger",leftIcon:e.jsx(te,{size:16}),onClick:()=>V(!0),children:"Delete"})]})}),e.jsxs("div",{className:"page candidate-detail-page",children:[e.jsxs(Oe,{to:"/candidates",className:"candidate-detail-back",children:[e.jsx(fs,{size:16}),"Back to Candidates"]}),e.jsxs("div",{className:"candidate-detail-grid",children:[e.jsxs("div",{className:"candidate-detail-main",children:[e.jsx(L,{className:"candidate-profile-card",children:e.jsxs(M,{children:[e.jsxs("div",{className:"candidate-profile-header",children:[e.jsx("div",{className:"candidate-profile-avatar",children:Ye(t)}),e.jsxs("div",{className:"candidate-profile-info",children:[e.jsx("h1",{className:"candidate-profile-name",children:ae(t)}),e.jsx("p",{className:"candidate-profile-job",children:t.jobTitle||"No position assigned"}),e.jsxs("div",{className:"candidate-status-wrapper",children:[e.jsxs("button",{className:"candidate-status-btn",onClick:s=>{s.stopPropagation(),f(!N)},children:[e.jsx(ue,{variant:ce.color,dot:!0,children:ce.label}),e.jsx(qe,{size:14})]}),N&&e.jsx("div",{className:"candidate-status-dropdown",onClick:s=>s.stopPropagation(),children:Ke.map(s=>e.jsxs("button",{className:t.status===s.value?"active":"",onClick:()=>Q(s.value),children:[e.jsx("span",{className:`status-dot status-dot-${s.color}`}),s.label]},s.value))})]})]})]}),e.jsxs("div",{className:"candidate-profile-contacts",children:[e.jsxs("a",{href:`mailto:${t.email}`,className:"candidate-contact-item",children:[e.jsx(Ne,{size:18}),e.jsx("span",{children:t.email})]}),e.jsxs("a",{href:`tel:${t.phone}`,className:"candidate-contact-item",children:[e.jsx(ke,{size:18}),e.jsx("span",{children:t.phone})]}),t.address&&e.jsxs("div",{className:"candidate-contact-item",children:[e.jsx(ie,{size:18}),e.jsxs("span",{children:[t.address,t.postcode?`, ${t.postcode}`:""]})]})]}),e.jsxs("div",{className:"candidate-quick-actions",children:[e.jsxs("button",{onClick:()=>_(!0),className:"quick-action-btn quick-action-whatsapp",children:[e.jsx(Ce,{size:16}),"WhatsApp"]}),e.jsxs("a",{href:`mailto:${t.email}`,className:"quick-action-btn quick-action-email",children:[e.jsx(Ne,{size:16}),"Email"]}),t.cvUrl&&e.jsxs("a",{href:t.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"quick-action-btn quick-action-cv",children:[e.jsx(me,{size:16}),"View CV"]})]})]})}),e.jsxs("div",{className:"candidate-tabs",children:[e.jsx("button",{className:`candidate-tab ${d==="activity"?"active":""}`,onClick:()=>x("activity"),children:"Activity"}),e.jsxs("button",{className:`candidate-tab ${d==="interviews"?"active":""}`,onClick:()=>x("interviews"),children:["Interviews (",v.length,")"]}),e.jsxs("button",{className:`candidate-tab ${d==="notes"?"active":""}`,onClick:()=>x("notes"),children:["Notes (",p.length,")"]})]}),d==="activity"?e.jsx(L,{children:e.jsx(M,{children:y.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx(H,{size:24}),e.jsx("p",{children:"No activity yet"})]}):e.jsx("div",{className:"candidate-activity-list",children:y.map(s=>{const u=Ae(s.type);return e.jsxs("div",{className:"candidate-activity-item",children:[e.jsx("div",{className:"activity-icon",children:e.jsx(u,{size:16})}),e.jsxs("div",{className:"activity-content",children:[e.jsx("p",{className:"activity-description",children:s.description}),e.jsxs("p",{className:"activity-meta",children:[s.createdByName," Â· ",W(s.createdAt)]})]})]},s.id)})})})}):d==="interviews"?e.jsx(L,{children:e.jsxs(M,{children:[e.jsx("div",{className:"candidate-interviews-header",children:e.jsx(w,{size:"sm",leftIcon:e.jsx($,{size:14}),onClick:()=>{B(null),T(!0)},children:"Schedule Interview"})}),v.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx($,{size:24}),e.jsx("p",{children:"No interviews scheduled"})]}):e.jsx("div",{className:"candidate-interviews-list",children:v.map(s=>{const u=js(s.status),S=xs(s.dateTime),D=vs(s.dateTime);return e.jsxs("div",{className:`candidate-interview-card ${S&&s.status==="scheduled"?"interview-overdue":""} ${D?"interview-today":""}`,children:[e.jsxs("div",{className:"interview-card-header",children:[e.jsx("div",{className:"interview-type-badge",children:s.type==="trial"?"Trial Day":"Interview"}),e.jsx(ue,{variant:u.color,children:u.label})]}),e.jsxs("div",{className:"interview-card-datetime",children:[e.jsx($,{size:16}),e.jsx("span",{children:a(s.dateTime)}),D&&e.jsx("span",{className:"interview-today-badge",children:"Today"})]}),s.location&&e.jsxs("div",{className:"interview-card-location",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:s.location})]}),s.interviewerName&&e.jsxs("div",{className:"interview-card-interviewer",children:[e.jsx(be,{size:16}),e.jsx("span",{children:s.interviewerName})]}),s.status==="scheduled"&&e.jsxs("div",{className:"interview-card-actions",children:[e.jsxs("button",{className:"interview-action-btn",onClick:()=>{B(s),T(!0)},children:[e.jsx(ve,{size:14}),"Edit"]}),e.jsxs("button",{className:"interview-action-btn interview-action-complete",onClick:()=>le(s.id,"completed"),children:[e.jsx(H,{size:14}),"Complete"]}),e.jsx("button",{className:"interview-action-btn interview-action-cancel",onClick:()=>le(s.id,"cancelled"),children:"Cancel"})]}),s.status==="completed"&&s.feedback&&e.jsxs("div",{className:"interview-feedback",children:[e.jsx("p",{className:"interview-feedback-label",children:"Feedback:"}),e.jsx("p",{className:"interview-feedback-text",children:s.feedback})]})]},s.id)})})]})}):e.jsx(L,{children:e.jsxs(M,{children:[e.jsxs("div",{className:"candidate-add-note",children:[e.jsx(ne,{placeholder:"Add a note...",value:O,onChange:s=>Y(s.target.value),rows:3}),e.jsx("div",{className:"candidate-add-note-actions",children:e.jsx(w,{size:"sm",onClick:Te,loading:Z,disabled:!O.trim(),children:"Add Note"})})]}),p.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx(xe,{size:24}),e.jsx("p",{children:"No notes yet"})]}):e.jsx("div",{className:"candidate-notes-list",children:p.map(s=>e.jsxs("div",{className:"candidate-note-item",children:[e.jsxs("div",{className:"note-header",children:[e.jsx("span",{className:"note-author",children:s.createdByName}),e.jsx("span",{className:"note-date",children:W(s.createdAt)}),e.jsx("button",{className:"note-delete",onClick:()=>Se(s.id),title:"Delete note",children:e.jsx(te,{size:14})})]}),e.jsx("p",{className:"note-content",children:s.content})]},s.id))})]})})]}),e.jsxs("div",{className:"candidate-detail-sidebar",children:[e.jsx(L,{children:e.jsxs(M,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Details"}),e.jsxs("div",{className:"sidebar-details",children:[e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Source"}),e.jsx("span",{className:"sidebar-detail-value",children:Qe(t.source)})]}),e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Applied"}),e.jsx("span",{className:"sidebar-detail-value",children:b(t.createdAt)})]}),e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Last Updated"}),e.jsx("span",{className:"sidebar-detail-value",children:b(t.updatedAt)})]}),t.cvFileName&&e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"CV"}),e.jsxs("a",{href:t.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"sidebar-detail-link",children:[t.cvFileName,e.jsx(Ve,{size:12})]})]})]})]})}),t.jobId&&e.jsx(L,{children:e.jsxs(M,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Position"}),e.jsxs("div",{className:"sidebar-job",children:[e.jsx(Ue,{size:18}),e.jsx("div",{children:e.jsx("p",{className:"sidebar-job-title",children:t.jobTitle})})]})]})}),t.notes&&e.jsx(L,{children:e.jsxs(M,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Initial Notes"}),e.jsx("p",{className:"sidebar-initial-notes",children:t.notes})]})})]})]})]}),e.jsx(We,{isOpen:P,onClose:()=>z(!1),onSubmit:Ie,candidate:t,loading:J}),e.jsx(zs,{isOpen:R,onClose:()=>_(!1),candidate:t}),e.jsx(Ls,{isOpen:G,onClose:()=>{T(!1),B(null)},candidate:t,existingInterview:F}),X&&e.jsx("div",{className:"delete-modal-backdrop",onClick:()=>V(!1),children:e.jsxs("div",{className:"delete-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"delete-modal-icon",children:e.jsx(te,{size:24})}),e.jsx("h3",{children:"Delete Candidate"}),e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:ae(t)}),"? This will also delete their CV and all notes. This action cannot be undone."]}),e.jsxs("div",{className:"delete-modal-actions",children:[e.jsx(w,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx(w,{variant:"danger",onClick:De,children:"Delete"})]})]})})]})}export{Qs as default};
