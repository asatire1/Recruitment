import{c as f,L as te,H as ae,y as m,x as e,G as se}from"./index-BdTvf1OG.js";import{H as ne,C as ie,a as le,B as k}from"./Header-Dnyun4aJ.js";import{B as b,U as de}from"./Button-Bj2monD7.js";import{M as re}from"./Modal-DEcSBwut.js";import{E as ce}from"./EmptyState-TqlH2uI_.js";import{s as oe,I as he,a as me,f as g,g as z}from"./interviews-BJAhbuFp.js";import{C as xe}from"./chevron-right-BFvogPqs.js";import{C as W}from"./calendar-Ds_niS7A.js";import{C as je}from"./clock-C3621eNC.js";import{P as ue}from"./phone-CcgBJO23.js";import"./candidates-BTQ-1Wyd.js";import"./sanitize-Crbaelqk.js";const ve=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],ge=f("building",ve);const pe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ye=f("grid-3x3",pe);const Ne=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],De=f("list",Ne);const we=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Te=f("video",we),V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=["January","February","March","April","May","June","July","August","September","October","November","December"],d={MONTH:"month",WEEK:"week",DAY:"day",LIST:"list"};function ze(){const{toggleMobileMenu:Y}=te(),_=ae(),[c,p]=m.useState(new Date),[r,y]=m.useState(d.MONTH),[E,A]=m.useState([]),[F,S]=m.useState(!0),[n,N]=m.useState(null),[x,$]=m.useState({type:"all",status:"all"}),D=m.useMemo(()=>{const t=new Date(c),a=new Date(c);return r===d.MONTH?(t.setDate(1),t.setHours(0,0,0,0),t.setDate(t.getDate()-t.getDay()),a.setMonth(a.getMonth()+1),a.setDate(0),a.setHours(23,59,59,999),a.setDate(a.getDate()+(6-a.getDay()))):r===d.WEEK?(t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0),a.setDate(t.getDate()+6),a.setHours(23,59,59,999)):r===d.DAY?(t.setHours(0,0,0,0),a.setHours(23,59,59,999)):(t.setHours(0,0,0,0),a.setDate(a.getDate()+30),a.setHours(23,59,59,999)),{start:t,end:a}},[c,r]);m.useEffect(()=>{S(!0);const t=oe(D.start,D.end,a=>{A(a),S(!1)});return()=>t()},[D.start.getTime(),D.end.getTime()]);const I=m.useMemo(()=>E.filter(t=>!(x.type!=="all"&&t.type!==x.type||x.status!=="all"&&t.status!==x.status)),[E,x]),j=m.useMemo(()=>{const t={};return I.forEach(a=>{const i=(a.dateTime?.toDate?a.dateTime.toDate():new Date(a.dateTime)).toDateString();t[i]||(t[i]=[]),t[i].push(a)}),Object.keys(t).forEach(a=>{t[a].sort((s,i)=>{const l=s.dateTime?.toDate?s.dateTime.toDate():new Date(s.dateTime),o=i.dateTime?.toDate?i.dateTime.toDate():new Date(i.dateTime);return l-o})}),t},[I]),P=()=>p(new Date),B=()=>{const t=new Date(c);r===d.MONTH?t.setMonth(t.getMonth()-1):r===d.WEEK?t.setDate(t.getDate()-7):t.setDate(t.getDate()-1),p(t)},K=()=>{const t=new Date(c);r===d.MONTH?t.setMonth(t.getMonth()+1):r===d.WEEK?t.setDate(t.getDate()+7):t.setDate(t.getDate()+1),p(t)},R=()=>{if(r===d.MONTH)return`${M[c.getMonth()]} ${c.getFullYear()}`;if(r===d.WEEK){const t=new Date(c);t.setDate(t.getDate()-t.getDay());const a=new Date(t);return a.setDate(a.getDate()+6),t.getMonth()===a.getMonth()?`${t.getDate()} - ${a.getDate()} ${M[t.getMonth()]} ${t.getFullYear()}`:`${t.getDate()} ${M[t.getMonth()].slice(0,3)} - ${a.getDate()} ${M[a.getMonth()].slice(0,3)} ${a.getFullYear()}`}else return r===d.DAY?c.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"Upcoming Events"},G=m.useMemo(()=>{if(r!==d.MONTH)return[];const t=[],a=new Date(c.getFullYear(),c.getMonth(),1);new Date(c.getFullYear(),c.getMonth()+1,0);const s=new Date(a);s.setDate(s.getDate()-a.getDay());for(let i=0;i<6;i++){const l=[];for(let o=0;o<7;o++){const h=new Date(s);h.setDate(s.getDate()+i*7+o),l.push(h)}t.push(l)}return t},[c,r]),v=t=>{const a=new Date;return t.toDateString()===a.toDateString()},U=t=>t.getMonth()===c.getMonth(),w=t=>t.status==="cancelled"?"gray":t.status==="completed"?"success":t.status==="no_show"?"error":t.type==="trial"?"warning":"primary",H=t=>{switch(t){case"phone":return ue;case"video":return Te;default:return ge}},C=(t,a)=>{a.stopPropagation(),N(t)},L=t=>{p(t),y(d.DAY)},O=t=>{_(`/candidates/${t}`)},J=()=>e.jsxs("div",{className:"calendar-grid",children:[e.jsx("div",{className:"calendar-header-row",children:V.map(t=>e.jsx("div",{className:"calendar-header-cell",children:t},t))}),G.map((t,a)=>e.jsx("div",{className:"calendar-week",children:t.map((s,i)=>{const l=s.toDateString(),o=j[l]||[],h=U(s),T=v(s);return e.jsxs("div",{className:`calendar-day ${h?"":"other-month"} ${T?"today":""}`,onClick:()=>L(s),children:[e.jsx("div",{className:"calendar-day-header",children:e.jsx("span",{className:`calendar-day-number ${T?"today-badge":""}`,children:s.getDate()})}),e.jsxs("div",{className:"calendar-day-events",children:[o.slice(0,3).map(u=>e.jsxs("div",{className:`calendar-event calendar-event-${w(u)}`,onClick:ee=>C(u,ee),title:`${u.candidateName} - ${u.type==="trial"?"Trial":"Interview"}`,children:[e.jsx("span",{className:"event-time",children:g(u.dateTime)}),e.jsx("span",{className:"event-title",children:u.candidateName})]},u.id)),o.length>3&&e.jsxs("div",{className:"calendar-more-events",children:["+",o.length-3," more"]})]})]},i)})},a))]}),q=()=>{const t=new Date(c);t.setDate(t.getDate()-t.getDay());const a=[];for(let s=0;s<7;s++){const i=new Date(t);i.setDate(t.getDate()+s),a.push(i)}return e.jsxs("div",{className:"calendar-week-view",children:[e.jsx("div",{className:"week-header",children:a.map((s,i)=>e.jsxs("div",{className:`week-header-cell ${v(s)?"today":""}`,onClick:()=>L(s),children:[e.jsx("span",{className:"week-day-name",children:V[i]}),e.jsx("span",{className:`week-day-number ${v(s)?"today-badge":""}`,children:s.getDate()})]},i))}),e.jsx("div",{className:"week-body",children:a.map((s,i)=>{const l=s.toDateString(),o=j[l]||[];return e.jsxs("div",{className:`week-column ${v(s)?"today":""}`,children:[o.map(h=>e.jsxs("div",{className:`week-event week-event-${w(h)}`,onClick:T=>C(h,T),children:[e.jsx("div",{className:"week-event-time",children:g(h.dateTime)}),e.jsx("div",{className:"week-event-title",children:h.candidateName}),e.jsx("div",{className:"week-event-type",children:h.type==="trial"?"Trial":"Interview"})]},h.id)),o.length===0&&e.jsx("div",{className:"week-empty",children:"No events"})]},i)})})]})},Q=()=>{const t=c.toDateString(),a=j[t]||[],s=[];for(let i=8;i<=20;i++)s.push(i);return e.jsx("div",{className:"calendar-day-view",children:e.jsx("div",{className:"day-timeline",children:s.map(i=>e.jsxs("div",{className:"day-time-slot",children:[e.jsxs("div",{className:"day-time-label",children:[i.toString().padStart(2,"0"),":00"]}),e.jsx("div",{className:"day-time-content",children:a.filter(l=>(l.dateTime?.toDate?l.dateTime.toDate():new Date(l.dateTime)).getHours()===i).map(l=>e.jsxs("div",{className:`day-event day-event-${w(l)}`,onClick:o=>C(l,o),style:{height:`${Math.max(l.duration/60*60,50)}px`,top:`${(l.dateTime?.toDate?l.dateTime.toDate():new Date(l.dateTime)).getMinutes()}px`},children:[e.jsx("div",{className:"day-event-time",children:g(l.dateTime)}),e.jsx("div",{className:"day-event-title",children:l.candidateName}),e.jsxs("div",{className:"day-event-details",children:[e.jsx("span",{children:l.type==="trial"?"Trial":"Interview"}),e.jsxs("span",{children:[l.duration," min"]})]})]},l.id))})]},i))})})},X=()=>{const t=Object.keys(j).sort((a,s)=>new Date(a)-new Date(s));return e.jsx("div",{className:"calendar-list-view",children:t.length===0?e.jsx(ce,{variant:"calendar",title:"No upcoming events",description:"Schedule interviews or trials to see them here",className:"empty-state-compact"}):t.map(a=>e.jsxs("div",{className:"list-day-group",children:[e.jsxs("div",{className:"list-day-header",children:[e.jsx("span",{className:`list-day-date ${v(new Date(a))?"today":""}`,children:new Date(a).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"})}),e.jsxs("span",{className:"list-day-count",children:[j[a].length," event",j[a].length!==1?"s":""]})]}),e.jsx("div",{className:"list-events",children:j[a].map(s=>{const i=H(s.locationType),l=z(s.status);return e.jsx(ie,{className:`list-event-card list-event-${w(s)}`,onClick:()=>N(s),children:e.jsx(le,{children:e.jsxs("div",{className:"list-event-content",children:[e.jsxs("div",{className:"list-event-time",children:[e.jsx(je,{size:16}),e.jsx("span",{children:g(s.dateTime)}),e.jsxs("span",{className:"list-event-duration",children:[s.duration," min"]})]}),e.jsxs("div",{className:"list-event-main",children:[e.jsx("h4",{children:s.candidateName}),e.jsx("p",{className:"list-event-job",children:s.jobTitle||"No job assigned"})]}),e.jsxs("div",{className:"list-event-meta",children:[e.jsx(k,{variant:s.type==="trial"?"warning":"primary",children:s.type==="trial"?"Trial":"Interview"}),e.jsx(k,{variant:l.color,children:l.label})]}),e.jsxs("div",{className:"list-event-location",children:[e.jsx(i,{size:14}),e.jsx("span",{children:s.location||s.locationType})]})]})})},s.id)})})]},a))})},Z=()=>{if(!n)return null;const t=n.dateTime?.toDate?n.dateTime.toDate():new Date(n.dateTime),a=z(n.status),s=H(n.locationType);return e.jsx(re,{isOpen:!!n,onClose:()=>N(null),title:n.type==="trial"?"Trial Details":"Interview Details",children:e.jsxs("div",{className:"event-modal",children:[e.jsx("div",{className:"event-modal-header",children:e.jsxs("div",{className:"event-modal-badges",children:[e.jsx(k,{variant:n.type==="trial"?"warning":"primary",children:n.type==="trial"?"Trial Day":"Interview"}),e.jsx(k,{variant:a.color,children:a.label})]})}),e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Candidate"}),e.jsxs("div",{className:"event-modal-candidate",onClick:()=>O(n.candidateId),children:[e.jsx(de,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:n.candidateName}),e.jsx("span",{children:n.candidateEmail}),e.jsx("span",{children:n.candidatePhone})]})]})]}),e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Date & Time"}),e.jsxs("div",{className:"event-modal-datetime",children:[e.jsx(W,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:t.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.jsxs("span",{children:[g(n.dateTime)," (",n.duration," minutes)"]})]})]})]}),e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Location"}),e.jsxs("div",{className:"event-modal-location",children:[e.jsx(s,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:n.locationType==="phone"?"Phone Call":n.locationType==="video"?"Video Call":"In Person"}),n.location&&e.jsx("span",{children:n.location})]})]})]}),n.jobTitle&&e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Position"}),e.jsx("p",{children:n.jobTitle})]}),n.interviewerName&&e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Interviewer"}),e.jsx("p",{children:n.interviewerName}),n.interviewerPhone&&e.jsx("span",{className:"event-modal-phone",children:n.interviewerPhone})]}),n.notes&&e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Notes"}),e.jsx("p",{children:n.notes})]}),n.feedback&&e.jsxs("div",{className:"event-modal-section",children:[e.jsx("h4",{children:"Feedback"}),e.jsx("p",{children:n.feedback}),n.rating&&e.jsxs("div",{className:"event-modal-rating",children:["Rating: ",n.rating,"/5"]})]}),e.jsxs("div",{className:"event-modal-actions",children:[e.jsx(b,{variant:"outline",onClick:()=>N(null),children:"Close"}),e.jsx(b,{onClick:()=>O(n.candidateId),children:"View Candidate"})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{title:"Calendar",toggleMobileMenu:Y}),e.jsxs("main",{className:"calendar-page",children:[e.jsxs("div",{className:"calendar-controls",children:[e.jsxs("div",{className:"calendar-nav",children:[e.jsx(b,{variant:"outline",onClick:P,children:"Today"}),e.jsxs("div",{className:"calendar-nav-arrows",children:[e.jsx("button",{className:"nav-arrow",onClick:B,children:e.jsx(se,{size:20})}),e.jsx("button",{className:"nav-arrow",onClick:K,children:e.jsx(xe,{size:20})})]}),e.jsx("h2",{className:"calendar-title",children:R()})]}),e.jsxs("div",{className:"calendar-actions",children:[e.jsxs("div",{className:"view-mode-toggle",children:[e.jsx("button",{className:`view-mode-btn ${r===d.MONTH?"active":""}`,onClick:()=>y(d.MONTH),title:"Month view",children:e.jsx(ye,{size:18})}),e.jsx("button",{className:`view-mode-btn ${r===d.WEEK?"active":""}`,onClick:()=>y(d.WEEK),title:"Week view",children:e.jsx(W,{size:18})}),e.jsx("button",{className:`view-mode-btn ${r===d.LIST?"active":""}`,onClick:()=>y(d.LIST),title:"List view",children:e.jsx(De,{size:18})})]}),e.jsxs("div",{className:"calendar-filters",children:[e.jsxs("select",{value:x.type,onChange:t=>$(a=>({...a,type:t.target.value})),className:"calendar-filter-select",children:[e.jsx("option",{value:"all",children:"All Types"}),he.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),e.jsxs("select",{value:x.status,onChange:t=>$(a=>({...a,status:t.target.value})),className:"calendar-filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),me.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]})]})]}),e.jsx("div",{className:`calendar-content calendar-${r}`,children:F?e.jsxs("div",{className:"calendar-loading",children:[e.jsx("div",{className:"calendar-loading-spinner"}),e.jsx("p",{children:"Loading events..."})]}):e.jsxs(e.Fragment,{children:[r===d.MONTH&&J(),r===d.WEEK&&q(),r===d.DAY&&Q(),r===d.LIST&&X()]})}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-dot-primary"}),e.jsx("span",{children:"Interview"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-dot-warning"}),e.jsx("span",{children:"Trial"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-dot-success"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-dot-gray"}),e.jsx("span",{children:"Cancelled"})]})]})]}),Z()]})}export{ze as default};
