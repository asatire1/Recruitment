const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eye-CzZWkuFv.js","assets/index-CmmLy6tP.js","assets/index-DX7dYFDL.css"])))=>i.map(i=>d[i]);
import{c as H,f as Le,a as Me,d as de,a8 as $e,s as Pe,y as l,x as e,a6 as he,K as ne,z as we,S as ee,J as se,B as _e,H as Be,L as Oe,C as qe,N as Ue,a9 as Fe,F as Ve}from"./index-CmmLy6tP.js";import{B as w,U as ke}from"./Button-_qc2lzY5.js";import{H as We,C as P,a as _,B as ue}from"./Header-9niYZkAi.js";import{F as me,E as He,C as Re}from"./CandidateFormModal-B6bHId9S.js";import{s as Ge,c as Je,d as Ye,g as Ke,e as ae,b as Qe,f as Xe,h as Ze,u as pe,l as es,i as ss,j as as,k as ts,m as is}from"./candidates-DpIT5QUX.js";import{M as ye}from"./Modal-DFbpDR1a.js";import{s as ns,b as ls,T as cs,g as rs,A as je,f as os,a as ds,M as xe}from"./whatsapp-ceb5RWHm.js";import{C as B}from"./calendar-V5tfCKZU.js";import{E as hs}from"./eye-CzZWkuFv.js";import{I as us,D as ms,L as ps,u as Ce,c as js,b as xs,g as vs,d as Ns,i as fs}from"./interviews-BV5gv02G.js";import{C as G}from"./clock-Bad9iAT5.js";import{M as ie}from"./map-pin-BNWlKL51.js";import{P as Te}from"./phone-8V4DBohh.js";import{P as ve,T as te}from"./trash-2-DFYuZTjQ.js";import{M as Ne}from"./mail-CopydtfB.js";import"./jobs-D58r5i2K.js";import"./sanitize-B3lvpje4.js";const gs=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bs=H("arrow-left",gs);const ws=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fe=H("copy",ws);const ks=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ys=H("link-2",ks);const Cs=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ge=H("loader-circle",Cs);const Ts=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ss=H("pen-line",Ts);const Is=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Se=H("send",Is);function As(){const r="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789";let m="";for(let t=0;t<12;t++)m+=r.charAt(Math.floor(Math.random()*r.length));return m}async function be({candidateId:r,candidateName:m,type:t="interview",jobId:c=null,jobTitle:b=null,location:i=null,expiryDays:o=7}){const p=As(),n=new Date;n.setDate(n.getDate()+o);const k={token:p,candidateId:r,candidateName:m,type:t,jobId:c,jobTitle:b,location:i,expiresAt:n,used:!1,createdAt:Pe()};await Le(Me(de,"bookingLinks"),k);const{setDoc:h,doc:N}=await $e(async()=>{const{setDoc:y,doc:C}=await import("./eye-CzZWkuFv.js").then(j=>j.i);return{setDoc:y,doc:C}},__vite__mapDeps([0,1,2]));return await h(N(de,"bookingLinks",p),k),{token:p,url:Es(p),expiresAt:n,type:t}}function Es(r){return`${window.location.origin+"/Recruitment/#"}/book/${r}`}function Ds({candidateName:r,type:m,jobTitle:t,location:c,bookingUrl:b}){let o=`Hi ${r.split(" ")[0]},

`;return o+=`Thanks for your application to Allied Pharmacies!

`,m==="interview"?o+="We'd like to invite you to an interview":o+="We'd like to invite you to a trial shift",t&&(o+=` for the ${t} position`),c&&(o+=` at ${c}`),o+=`.

`,o+=`ðŸ“… Please choose a time that suits you:
`,o+=`${b}

`,o+=`This link will expire in 7 days.

`,o+=`Looking forward to meeting you!

`,o+="Allied Recruitment Team",o}function zs({isOpen:r,onClose:m,candidate:t,additionalData:c={}}){const[b,i]=l.useState([]),[o,p]=l.useState(""),[n,k]=l.useState("all"),[h,N]=l.useState(""),[y,C]=l.useState(!0),[j,z]=l.useState(!1),[L,d]=l.useState(!0),[x,f]=l.useState(!1),[g,O]=l.useState("interview"),[M,J]=l.useState(""),[E,q]=l.useState(!1),[T,U]=l.useState(null);l.useEffect(()=>{const a=ns(v=>{i(v),d(!1)});return()=>a()},[]);const F=t?ls(t,c):{},Y=n==="all"?b:b.filter(a=>a.category===n),I=b.find(a=>a.id===o);l.useEffect(()=>{(async()=>{if(!I)return;let v={...F};if(I.content.includes("{{interviewBookingLink}}")&&t)try{q(!0);const A=await be({candidateId:t.id,candidateName:`${t.firstName} ${t.lastName}`,type:"interview",jobId:c.jobId||null,jobTitle:c.jobTitle||t.jobTitle||null});U(A),v.interviewBookingLink=A.url}catch(A){console.error("Error generating booking link:",A),v.interviewBookingLink="[Error generating link]"}finally{q(!1)}const $=os(I.content,v);N($),C(!0)})()},[o,I,t]),l.useEffect(()=>{r&&(p(""),k("all"),N(""),C(!0),z(!1),f(!1),U(null),O("interview"),J(""))},[r]);const X=a=>{p(a),f(!1),U(null)},R=async()=>{if(t){q(!0);try{const a=await be({candidateId:t.id,candidateName:`${t.firstName} ${t.lastName}`,type:g,jobId:c.jobId||null,jobTitle:c.jobTitle||null,location:M||null});U(a);const v=Ds({candidateName:`${t.firstName} ${t.lastName}`,type:g,jobTitle:c.jobTitle||null,location:M||null,bookingUrl:a.url});N(v),p("")}catch(a){console.error("Error generating booking link:",a),alert("Failed to generate booking link. Please try again.")}finally{q(!1)}}},V=()=>{if(!t?.phone||!h.trim())return;const a=ds(t.phone,h);window.open(a,"_blank"),m()},K=async()=>{try{await navigator.clipboard.writeText(h),z(!0),setTimeout(()=>z(!1),2e3)}catch(a){console.error("Failed to copy:",a)}},Z=async()=>{if(T)try{await navigator.clipboard.writeText(T.url),alert("Booking link copied!")}catch(a){console.error("Failed to copy link:",a)}},Q=()=>{if(!I)return h;let a=I.content;return je.forEach(({key:v})=>{const $=F[v],A=new RegExp(`\\{\\{${v}\\}\\}`,"g");$?a=a.replace(A,`<span class="placeholder-filled">${$}</span>`):a=a.replace(A,`<span class="placeholder-empty">{{${v}}}</span>`)}),a};return t?e.jsx(ye,{isOpen:r,onClose:m,title:"Send WhatsApp Message",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:m,children:"Cancel"}),e.jsx(w,{variant:"outline",leftIcon:j?e.jsx(he,{size:16}):e.jsx(fe,{size:16}),onClick:K,disabled:!h.trim(),children:j?"Copied!":"Copy"}),e.jsx(w,{leftIcon:e.jsx(Se,{size:16}),onClick:V,disabled:!h.trim()||E,className:"whatsapp-send-btn",children:"Send via WhatsApp"})]}),children:e.jsxs("div",{className:"whatsapp-modal-content",children:[e.jsxs("div",{className:"whatsapp-recipient",children:[e.jsxs("div",{className:"whatsapp-recipient-avatar",children:[t.firstName?.[0],t.lastName?.[0]]}),e.jsxs("div",{className:"whatsapp-recipient-info",children:[e.jsxs("span",{className:"whatsapp-recipient-name",children:[t.firstName," ",t.lastName]}),e.jsx("span",{className:"whatsapp-recipient-phone",children:t.phone})]})]}),e.jsxs("div",{className:"whatsapp-quick-actions",children:[e.jsx("label",{className:"whatsapp-label",children:"Quick Actions"}),e.jsxs("div",{className:"whatsapp-quick-btns",children:[e.jsxs("button",{className:`whatsapp-quick-btn ${x&&g==="interview"?"active":""}`,onClick:()=>{f(!0),O("interview"),p("")},children:[e.jsx(B,{size:16}),"Invite to Interview"]}),e.jsxs("button",{className:`whatsapp-quick-btn ${x&&g==="trial"?"active":""}`,onClick:()=>{f(!0),O("trial"),p("")},children:[e.jsx(B,{size:16}),"Invite to Trial"]})]})]}),x&&e.jsxs("div",{className:"whatsapp-booking-options",children:[e.jsxs("div",{className:"booking-option-row",children:[e.jsxs("div",{className:"booking-option-field",children:[e.jsx("label",{children:"Type"}),e.jsxs("select",{value:g,onChange:a=>O(a.target.value),children:[e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"trial",children:"Trial Shift"})]})]}),e.jsxs("div",{className:"booking-option-field",children:[e.jsx("label",{children:"Location (optional)"}),e.jsx("input",{type:"text",value:M,onChange:a=>J(a.target.value),placeholder:"e.g., Manchester Branch"})]})]}),e.jsx(w,{onClick:R,disabled:E,leftIcon:E?e.jsx(ge,{size:16,className:"spinning"}):e.jsx(ys,{size:16}),children:E?"Generating...":"Generate Booking Link"}),T&&e.jsxs("div",{className:"booking-link-generated",children:[e.jsxs("div",{className:"booking-link-success",children:[e.jsx(he,{size:16}),"Booking link created!"]}),e.jsxs("div",{className:"booking-link-url",children:[e.jsx("code",{children:T.url}),e.jsx("button",{onClick:Z,children:e.jsx(fe,{size:14})})]}),e.jsxs("p",{className:"booking-link-expiry",children:["Expires: ",T.expiresAt.toLocaleDateString("en-GB")]})]})]}),x&&e.jsx("div",{className:"whatsapp-divider",children:e.jsx("span",{children:"or choose a template"})}),e.jsxs("div",{className:"whatsapp-templates-section",children:[e.jsxs("div",{className:"whatsapp-templates-header",children:[e.jsx("label",{className:"whatsapp-label",children:"Choose a template"}),e.jsxs("select",{className:"whatsapp-category-select",value:n,onChange:a=>k(a.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),cs.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),L?e.jsx("div",{className:"whatsapp-templates-loading",children:"Loading templates..."}):Y.length===0?e.jsx("div",{className:"whatsapp-templates-empty",children:"No templates found. Create templates in Settings."}):e.jsx("div",{className:"whatsapp-templates-grid",children:Y.map(a=>e.jsxs("button",{className:`whatsapp-template-card ${o===a.id?"selected":""}`,onClick:()=>X(a.id),children:[e.jsx("span",{className:"whatsapp-template-name",children:a.name}),e.jsx("span",{className:"whatsapp-template-category",children:rs(a.category)})]},a.id))})]}),E&&e.jsxs("div",{className:"whatsapp-generating",children:[e.jsx(ge,{size:16,className:"spinning"}),e.jsx("span",{children:"Generating booking link..."})]}),e.jsxs("div",{className:"whatsapp-message-section",children:[e.jsxs("div",{className:"whatsapp-message-header",children:[e.jsx("label",{className:"whatsapp-label",children:"Message"}),e.jsxs("div",{className:"whatsapp-message-toggle",children:[e.jsxs("button",{className:`whatsapp-toggle-btn ${y?"active":""}`,onClick:()=>C(!0),children:[e.jsx(hs,{size:14}),"Preview"]}),e.jsxs("button",{className:`whatsapp-toggle-btn ${y?"":"active"}`,onClick:()=>C(!1),children:[e.jsx(Ss,{size:14}),"Edit"]})]})]}),y?e.jsx("div",{className:"whatsapp-message-preview",dangerouslySetInnerHTML:{__html:(T?h:Q()).replace(/\n/g,"<br>")}}):e.jsx(ne,{value:h,onChange:a=>N(a.target.value),rows:8,placeholder:"Type your message..."})]}),!y&&!T&&e.jsxs("div",{className:"whatsapp-placeholders-help",children:[e.jsx("span",{className:"whatsapp-placeholders-label",children:"Available placeholders:"}),e.jsx("div",{className:"whatsapp-placeholders-list",children:je.slice(0,6).map(a=>e.jsx("code",{className:"whatsapp-placeholder-tag",onClick:()=>N(v=>v+`{{${a.key}}}`),title:`Insert {{${a.key}}}`,children:`{{${a.key}}}`},a.key))})]})]})}):null}function Ls({isOpen:r,onClose:m,candidate:t,existingInterview:c=null,onSuccess:b}){const{user:i,userProfile:o}=we(),p=!!c,[n,k]=l.useState({type:"interview",date:"",time:"",duration:30,locationType:"in_person",location:"",interviewerName:"",interviewerPhone:"",notes:""}),[h,N]=l.useState({}),[y,C]=l.useState(!1);l.useEffect(()=>{if(c){const d=c.dateTime?.toDate?c.dateTime.toDate():new Date(c.dateTime);k({type:c.type||"interview",date:d.toISOString().split("T")[0],time:d.toTimeString().slice(0,5),duration:c.duration||30,locationType:c.locationType||"in_person",location:c.location||"",interviewerName:c.interviewerName||"",interviewerPhone:c.interviewerPhone||"",notes:c.notes||""})}else{const d=new Date;d.setDate(d.getDate()+1),k({type:"interview",date:d.toISOString().split("T")[0],time:"10:00",duration:30,locationType:"in_person",location:"",interviewerName:o?.displayName||"",interviewerPhone:"",notes:""})}N({})},[c,r,o]);const j=d=>{const{name:x,value:f}=d.target;k(g=>({...g,[x]:f})),h[x]&&N(g=>({...g,[x]:null}))},z=()=>{const d={};if(!n.date)d.date="Date is required";else{const x=new Date(n.date),f=new Date;f.setHours(0,0,0,0),x<f&&(d.date="Date cannot be in the past")}return n.time||(d.time="Time is required"),n.locationType==="in_person"&&!n.location.trim()&&(d.location="Location is required for in-person meetings"),N(d),Object.keys(d).length===0},L=async d=>{if(d.preventDefault(),!(!z()||!t)){C(!0);try{const x=new Date(`${n.date}T${n.time}`),f={candidateId:t.id,candidateName:`${t.firstName} ${t.lastName}`,candidatePhone:t.phone,candidateEmail:t.email,jobId:t.jobId,jobTitle:t.jobTitle,type:n.type,dateTime:x,duration:parseInt(n.duration),locationType:n.locationType,location:n.locationType==="in_person"?n.location:n.locationType,interviewerName:n.interviewerName,interviewerPhone:n.interviewerPhone,notes:n.notes};p?await Ce(c.id,f,i.uid,o?.displayName):await js(f,i.uid,o?.displayName),b?.(),m()}catch(x){console.error("Error scheduling interview:",x)}finally{C(!1)}}};return t?e.jsx(ye,{isOpen:r,onClose:m,title:p?"Edit Interview":"Schedule Interview",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:m,disabled:y,children:"Cancel"}),e.jsx(w,{onClick:L,loading:y,children:p?"Update Interview":"Schedule Interview"})]}),children:e.jsxs("form",{onSubmit:L,className:"schedule-form",children:[e.jsxs("div",{className:"schedule-candidate-info",children:[e.jsxs("div",{className:"schedule-candidate-avatar",children:[t.firstName?.[0],t.lastName?.[0]]}),e.jsxs("div",{className:"schedule-candidate-details",children:[e.jsxs("span",{className:"schedule-candidate-name",children:[t.firstName," ",t.lastName]}),e.jsx("span",{className:"schedule-candidate-job",children:t.jobTitle||"No position assigned"})]})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Type",name:"type",value:n.type,onChange:j,options:us})}),e.jsxs("div",{className:"schedule-form-row schedule-form-row-2col",children:[e.jsxs("div",{className:"schedule-field",children:[e.jsxs("label",{className:"schedule-label",children:[e.jsx(B,{size:16}),"Date"]}),e.jsx("input",{type:"date",name:"date",value:n.date,onChange:j,className:`schedule-input ${h.date?"schedule-input-error":""}`}),h.date&&e.jsx("span",{className:"schedule-error",children:h.date})]}),e.jsxs("div",{className:"schedule-field",children:[e.jsxs("label",{className:"schedule-label",children:[e.jsx(G,{size:16}),"Time"]}),e.jsx("input",{type:"time",name:"time",value:n.time,onChange:j,className:`schedule-input ${h.time?"schedule-input-error":""}`}),h.time&&e.jsx("span",{className:"schedule-error",children:h.time})]})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Duration",name:"duration",value:n.duration,onChange:j,options:ms})}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ee,{label:"Location Type",name:"locationType",value:n.locationType,onChange:j,options:ps})}),n.locationType==="in_person"&&e.jsx("div",{className:"schedule-form-row",children:e.jsx(se,{label:"Address",name:"location",value:n.location,onChange:j,placeholder:"e.g., 123 High Street, Manchester M1 1AA",leftIcon:e.jsx(ie,{size:16}),error:h.location})}),e.jsx("div",{className:"schedule-section-title",children:"Interviewer Details (Optional)"}),e.jsxs("div",{className:"schedule-form-row schedule-form-row-2col",children:[e.jsx(se,{label:"Interviewer Name",name:"interviewerName",value:n.interviewerName,onChange:j,placeholder:"Who will conduct the interview?",leftIcon:e.jsx(ke,{size:16})}),e.jsx(se,{label:"Interviewer Phone",name:"interviewerPhone",value:n.interviewerPhone,onChange:j,placeholder:"Contact number",leftIcon:e.jsx(Te,{size:16})})]}),e.jsx("div",{className:"schedule-form-row",children:e.jsx(ne,{label:"Notes (Optional)",name:"notes",value:n.notes,onChange:j,placeholder:"Any special instructions or notes...",rows:3})})]})}):null}function Qs(){const{id:r}=_e(),m=Be(),{toggleMobileMenu:t}=Oe(),{user:c,userProfile:b}=we(),[i,o]=l.useState(null),[p,n]=l.useState([]),[k,h]=l.useState([]),[N,y]=l.useState([]),[C,j]=l.useState(!0),[z,L]=l.useState(null),[d,x]=l.useState("activity"),[f,g]=l.useState(!1),[O,M]=l.useState(!1),[J,E]=l.useState(!1),[q,T]=l.useState(!1),[U,F]=l.useState(null),[Y,I]=l.useState(!1),[X,R]=l.useState(!1),[V,K]=l.useState(""),[Z,Q]=l.useState(!1);l.useEffect(()=>{if(!r)return;j(!0),L(null);const s=Ge(r,W=>{W?(o(W),j(!1)):(L("Candidate not found"),j(!1))}),u=Je(r,n),S=Ye(r,h),D=xs(r,y);return()=>{s(),u(),S(),D()}},[r]),l.useEffect(()=>{const s=()=>g(!1);return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const a=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",v=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"Unknown",$=s=>{if(!s)return"";const u=s.toDate?s.toDate():new Date(s),D=new Date-u,W=Math.floor(D/6e4),re=Math.floor(D/36e5),oe=Math.floor(D/864e5);return W<1?"Just now":W<60?`${W}m ago`:re<24?`${re}h ago`:oe<7?`${oe}d ago`:v(s)},A=async s=>{if(!i||i.status===s){g(!1);return}try{const u=i.status;await pe(r,{status:s}),await es(r,u,s,c.uid,b?.displayName)}catch(u){console.error("Error updating status:",u)}g(!1)},Ie=async()=>{if(V.trim()){Q(!0);try{await ss(r,V.trim(),c.uid,b?.displayName),K("")}catch(s){console.error("Error adding note:",s)}finally{Q(!1)}}},Ae=async s=>{try{await as(r,s)}catch(u){console.error("Error deleting note:",u)}},le=async(s,u)=>{try{await Ce(s,{status:u},c.uid,b?.displayName)}catch(S){console.error("Error updating interview status:",S)}},Ee=async(s,u)=>{I(!0);try{let S={};u&&(S=await ts(u,r)),await pe(r,{...s,...S}),M(!1)}catch(S){console.error("Error updating candidate:",S)}finally{I(!1)}},De=async()=>{try{await is(r),m("/candidates")}catch(s){console.error("Error deleting candidate:",s)}},ze=s=>{switch(s){case"status_change":return G;case"note_added":return xe;case"cv_uploaded":return me;case"interview_scheduled":return B;default:return G}};if(C)return e.jsxs("div",{className:"candidate-detail-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading candidate..."})]});if(z||!i)return e.jsxs("div",{className:"candidate-detail-error",children:[e.jsx(qe,{size:48}),e.jsx("h2",{children:"Candidate Not Found"}),e.jsx("p",{children:"The candidate you're looking for doesn't exist or has been deleted."}),e.jsx(w,{onClick:()=>m("/candidates"),children:"Back to Candidates"})]});const ce=Ke(i.status);return e.jsxs(e.Fragment,{children:[e.jsx(We,{title:ae(i),subtitle:i.jobTitle||"No position assigned",onMenuClick:t,actions:e.jsxs("div",{className:"candidate-detail-actions",children:[e.jsx(w,{variant:"outline",leftIcon:e.jsx(ve,{size:16}),onClick:()=>M(!0),children:"Edit"}),e.jsx(w,{variant:"danger",leftIcon:e.jsx(te,{size:16}),onClick:()=>R(!0),children:"Delete"})]})}),e.jsxs("div",{className:"page candidate-detail-page",children:[e.jsxs(Ue,{to:"/candidates",className:"candidate-detail-back",children:[e.jsx(bs,{size:16}),"Back to Candidates"]}),e.jsxs("div",{className:"candidate-detail-grid",children:[e.jsxs("div",{className:"candidate-detail-main",children:[e.jsx(P,{className:"candidate-profile-card",children:e.jsxs(_,{children:[e.jsxs("div",{className:"candidate-profile-header",children:[e.jsx("div",{className:"candidate-profile-avatar",children:Qe(i)}),e.jsxs("div",{className:"candidate-profile-info",children:[e.jsx("h1",{className:"candidate-profile-name",children:ae(i)}),e.jsx("p",{className:"candidate-profile-job",children:i.jobTitle||"No position assigned"}),e.jsxs("div",{className:"candidate-status-wrapper",children:[e.jsxs("button",{className:"candidate-status-btn",onClick:s=>{s.stopPropagation(),g(!f)},children:[e.jsx(ue,{variant:ce.color,dot:!0,children:ce.label}),e.jsx(Fe,{size:14})]}),f&&e.jsx("div",{className:"candidate-status-dropdown",onClick:s=>s.stopPropagation(),children:Xe.map(s=>e.jsxs("button",{className:i.status===s.value?"active":"",onClick:()=>A(s.value),children:[e.jsx("span",{className:`status-dot status-dot-${s.color}`}),s.label]},s.value))})]})]})]}),e.jsxs("div",{className:"candidate-profile-contacts",children:[e.jsxs("a",{href:`mailto:${i.email}`,className:"candidate-contact-item",children:[e.jsx(Ne,{size:18}),e.jsx("span",{children:i.email})]}),e.jsxs("a",{href:`tel:${i.phone}`,className:"candidate-contact-item",children:[e.jsx(Te,{size:18}),e.jsx("span",{children:i.phone})]}),i.address&&e.jsxs("div",{className:"candidate-contact-item",children:[e.jsx(ie,{size:18}),e.jsxs("span",{children:[i.address,i.postcode?`, ${i.postcode}`:""]})]})]}),e.jsxs("div",{className:"candidate-quick-actions",children:[e.jsxs("button",{onClick:()=>E(!0),className:"quick-action-btn quick-action-whatsapp",children:[e.jsx(Se,{size:16}),"WhatsApp"]}),e.jsxs("a",{href:`mailto:${i.email}`,className:"quick-action-btn quick-action-email",children:[e.jsx(Ne,{size:16}),"Email"]}),i.cvUrl&&e.jsxs("a",{href:i.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"quick-action-btn quick-action-cv",children:[e.jsx(me,{size:16}),"View CV"]})]})]})}),e.jsxs("div",{className:"candidate-tabs",children:[e.jsx("button",{className:`candidate-tab ${d==="activity"?"active":""}`,onClick:()=>x("activity"),children:"Activity"}),e.jsxs("button",{className:`candidate-tab ${d==="interviews"?"active":""}`,onClick:()=>x("interviews"),children:["Interviews (",N.length,")"]}),e.jsxs("button",{className:`candidate-tab ${d==="notes"?"active":""}`,onClick:()=>x("notes"),children:["Notes (",p.length,")"]})]}),d==="activity"?e.jsx(P,{children:e.jsx(_,{children:k.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx(G,{size:24}),e.jsx("p",{children:"No activity yet"})]}):e.jsx("div",{className:"candidate-activity-list",children:k.map(s=>{const u=ze(s.type);return e.jsxs("div",{className:"candidate-activity-item",children:[e.jsx("div",{className:"activity-icon",children:e.jsx(u,{size:16})}),e.jsxs("div",{className:"activity-content",children:[e.jsx("p",{className:"activity-description",children:s.description}),e.jsxs("p",{className:"activity-meta",children:[s.createdByName," Â· ",$(s.createdAt)]})]})]},s.id)})})})}):d==="interviews"?e.jsx(P,{children:e.jsxs(_,{children:[e.jsx("div",{className:"candidate-interviews-header",children:e.jsx(w,{size:"sm",leftIcon:e.jsx(B,{size:14}),onClick:()=>{F(null),T(!0)},children:"Schedule Interview"})}),N.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx(B,{size:24}),e.jsx("p",{children:"No interviews scheduled"})]}):e.jsx("div",{className:"candidate-interviews-list",children:N.map(s=>{const u=vs(s.status),S=Ns(s.dateTime),D=fs(s.dateTime);return e.jsxs("div",{className:`candidate-interview-card ${S&&s.status==="scheduled"?"interview-overdue":""} ${D?"interview-today":""}`,children:[e.jsxs("div",{className:"interview-card-header",children:[e.jsx("div",{className:"interview-type-badge",children:s.type==="trial"?"Trial Day":"Interview"}),e.jsx(ue,{variant:u.color,children:u.label})]}),e.jsxs("div",{className:"interview-card-datetime",children:[e.jsx(B,{size:16}),e.jsx("span",{children:a(s.dateTime)}),D&&e.jsx("span",{className:"interview-today-badge",children:"Today"})]}),s.location&&e.jsxs("div",{className:"interview-card-location",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:s.location})]}),s.interviewerName&&e.jsxs("div",{className:"interview-card-interviewer",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:s.interviewerName})]}),s.status==="scheduled"&&e.jsxs("div",{className:"interview-card-actions",children:[e.jsxs("button",{className:"interview-action-btn",onClick:()=>{F(s),T(!0)},children:[e.jsx(ve,{size:14}),"Edit"]}),e.jsxs("button",{className:"interview-action-btn interview-action-complete",onClick:()=>le(s.id,"completed"),children:[e.jsx(G,{size:14}),"Complete"]}),e.jsx("button",{className:"interview-action-btn interview-action-cancel",onClick:()=>le(s.id,"cancelled"),children:"Cancel"})]}),s.status==="completed"&&s.feedback&&e.jsxs("div",{className:"interview-feedback",children:[e.jsx("p",{className:"interview-feedback-label",children:"Feedback:"}),e.jsx("p",{className:"interview-feedback-text",children:s.feedback})]})]},s.id)})})]})}):e.jsx(P,{children:e.jsxs(_,{children:[e.jsxs("div",{className:"candidate-add-note",children:[e.jsx(ne,{placeholder:"Add a note...",value:V,onChange:s=>K(s.target.value),rows:3}),e.jsx("div",{className:"candidate-add-note-actions",children:e.jsx(w,{size:"sm",onClick:Ie,loading:Z,disabled:!V.trim(),children:"Add Note"})})]}),p.length===0?e.jsxs("div",{className:"candidate-empty-tab",children:[e.jsx(xe,{size:24}),e.jsx("p",{children:"No notes yet"})]}):e.jsx("div",{className:"candidate-notes-list",children:p.map(s=>e.jsxs("div",{className:"candidate-note-item",children:[e.jsxs("div",{className:"note-header",children:[e.jsx("span",{className:"note-author",children:s.createdByName}),e.jsx("span",{className:"note-date",children:$(s.createdAt)}),e.jsx("button",{className:"note-delete",onClick:()=>Ae(s.id),title:"Delete note",children:e.jsx(te,{size:14})})]}),e.jsx("p",{className:"note-content",children:s.content})]},s.id))})]})})]}),e.jsxs("div",{className:"candidate-detail-sidebar",children:[e.jsx(P,{children:e.jsxs(_,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Details"}),e.jsxs("div",{className:"sidebar-details",children:[e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Source"}),e.jsx("span",{className:"sidebar-detail-value",children:Ze(i.source)})]}),e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Applied"}),e.jsx("span",{className:"sidebar-detail-value",children:v(i.createdAt)})]}),e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"Last Updated"}),e.jsx("span",{className:"sidebar-detail-value",children:v(i.updatedAt)})]}),i.cvFileName&&e.jsxs("div",{className:"sidebar-detail-item",children:[e.jsx("span",{className:"sidebar-detail-label",children:"CV"}),e.jsxs("a",{href:i.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"sidebar-detail-link",children:[i.cvFileName,e.jsx(He,{size:12})]})]})]})]})}),i.jobId&&e.jsx(P,{children:e.jsxs(_,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Position"}),e.jsxs("div",{className:"sidebar-job",children:[e.jsx(Ve,{size:18}),e.jsx("div",{children:e.jsx("p",{className:"sidebar-job-title",children:i.jobTitle})})]})]})}),i.notes&&e.jsx(P,{children:e.jsxs(_,{children:[e.jsx("h3",{className:"sidebar-section-title",children:"Initial Notes"}),e.jsx("p",{className:"sidebar-initial-notes",children:i.notes})]})})]})]})]}),e.jsx(Re,{isOpen:O,onClose:()=>M(!1),onSubmit:Ee,candidate:i,loading:Y}),e.jsx(zs,{isOpen:J,onClose:()=>E(!1),candidate:i}),e.jsx(Ls,{isOpen:q,onClose:()=>{T(!1),F(null)},candidate:i,existingInterview:U}),X&&e.jsx("div",{className:"delete-modal-backdrop",onClick:()=>R(!1),children:e.jsxs("div",{className:"delete-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"delete-modal-icon",children:e.jsx(te,{size:24})}),e.jsx("h3",{children:"Delete Candidate"}),e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:ae(i)}),"? This will also delete their CV and all notes. This action cannot be undone."]}),e.jsxs("div",{className:"delete-modal-actions",children:[e.jsx(w,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(w,{variant:"danger",onClick:De,children:"Delete"})]})]})})]})}export{Qs as default};
