import{c as P,z as Z,y as n,x as e,J as G,S as Q,K as X,e as $,d as q,g as ee,D as K,aa as se,L as ae,E as te,U as le}from"./index-BdTvf1OG.js";import{C as A,a as T,B as ie,H as ne,b as re}from"./Header-Dnyun4aJ.js";import{B as x,U as Y}from"./Button-Bj2monD7.js";import{M as ce}from"./Modal-DEcSBwut.js";import{E as oe}from"./EmptyState-TqlH2uI_.js";import{s as de,T as H,g as he,A as me,c as ue,u as pe,d as xe,e as ge,M as je}from"./whatsapp-BF5ty1Kr.js";import{P as W}from"./plus-D2qaLAsg.js";import{P as ye,T as F}from"./trash-2-DOj90Qyj.js";import{C as J}from"./calendar-Ds_niS7A.js";import{C as ve}from"./clock-C3621eNC.js";import{S as be}from"./sparkles-CiGFlNqv.js";const fe=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ne=P("cloud",fe);const Ce=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ke=P("database",Ce);const Se=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],we=P("palette",Se);const De=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ae=P("save",De);const Te=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ee=P("shield",Te);function Me(){const{user:b}=Z(),[m,d]=n.useState([]),[f,k]=n.useState(!0),[r,j]=n.useState("all"),[S,E]=n.useState(!1),[N,g]=n.useState(null),[M,L]=n.useState(!1),[z,i]=n.useState(null),[h,p]=n.useState({name:"",category:"",content:""}),[w,y]=n.useState({});n.useEffect(()=>{const a=de(o=>{d(o),k(!1)});return()=>a()},[]);const _=(r==="all"?m:m.filter(a=>a.category===r)).reduce((a,o)=>{const c=o.category||"general";return a[c]||(a[c]=[]),a[c].push(o),a},{}),B=async()=>{k(!0);try{await ue(b.uid)}catch(a){console.error("Error seeding templates:",a)}},I=a=>{const{name:o,value:c}=a.target;p(D=>({...D,[o]:c})),w[o]&&y(D=>({...D,[o]:null}))},s=a=>{p(o=>({...o,content:o.content+`{{${a}}}`}))},t=()=>{const a={};return h.name.trim()||(a.name="Name is required"),h.category||(a.category="Category is required"),h.content.trim()||(a.content="Content is required"),y(a),Object.keys(a).length===0},l=async()=>{if(t()){L(!0);try{N?await pe(N.id,h):await xe(h,b.uid),O()}catch(a){console.error("Error saving template:",a)}finally{L(!1)}}},u=async a=>{try{await ge(a)}catch(o){console.error("Error deleting template:",o)}i(null)},C=a=>{g(a),p({name:a.name,category:a.category,content:a.content}),y({}),E(!0)},v=()=>{g(null),p({name:"",category:"",content:""}),y({}),E(!0)},O=()=>{E(!1),g(null),p({name:"",category:"",content:""}),y({})};return e.jsxs("div",{className:"whatsapp-templates-page",children:[e.jsxs("div",{className:"templates-header",children:[e.jsxs("div",{className:"templates-header-left",children:[e.jsx("h2",{className:"templates-title",children:"WhatsApp Templates"}),e.jsx("p",{className:"templates-subtitle",children:"Create and manage message templates for candidate communication"})]}),e.jsx(x,{leftIcon:e.jsx(W,{size:16}),onClick:v,children:"New Template"})]}),e.jsxs("div",{className:"templates-filter",children:[e.jsxs("select",{className:"templates-category-select",value:r,onChange:a=>j(a.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),H.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),m.length===0&&!f&&e.jsx(x,{variant:"outline",onClick:B,children:"Load Default Templates"})]}),f?e.jsxs("div",{className:"templates-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading templates..."})]}):m.length===0?e.jsx(A,{className:"templates-empty",children:e.jsx(T,{children:e.jsx(oe,{variant:"messages",title:"No templates yet",description:"Create your first template or load the default templates to get started.",action:e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:B,children:"Load Default Templates"}),e.jsx(x,{variant:"outline",onClick:v,children:"Create Custom Template"})]})})})}):e.jsx("div",{className:"templates-list",children:Object.entries(_).map(([a,o])=>e.jsxs("div",{className:"templates-category-group",children:[e.jsxs("h3",{className:"templates-category-title",children:[he(a),e.jsx("span",{className:"templates-category-count",children:o.length})]}),e.jsx("div",{className:"templates-grid",children:o.map(c=>e.jsx(A,{className:"template-card",children:e.jsxs(T,{children:[e.jsxs("div",{className:"template-card-header",children:[e.jsx("h4",{className:"template-card-name",children:c.name}),c.isDefault&&e.jsx(ie,{variant:"gray",children:"Default"})]}),e.jsxs("p",{className:"template-card-preview",children:[c.content.substring(0,120),c.content.length>120?"...":""]}),c.placeholders?.length>0&&e.jsxs("div",{className:"template-card-placeholders",children:[c.placeholders.slice(0,4).map(D=>e.jsx("code",{className:"template-placeholder",children:`{{${D}}}`},D)),c.placeholders.length>4&&e.jsxs("span",{className:"template-placeholder-more",children:["+",c.placeholders.length-4," more"]})]}),e.jsxs("div",{className:"template-card-actions",children:[e.jsx("button",{className:"template-action-btn",onClick:()=>C(c),title:"Edit",children:e.jsx(ye,{size:16})}),e.jsx("button",{className:"template-action-btn template-action-danger",onClick:()=>i(c),title:"Delete",children:e.jsx(F,{size:16})})]})]})},c.id))})]},a))}),e.jsx(ce,{isOpen:S,onClose:O,title:N?"Edit Template":"Create Template",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"outline",onClick:O,disabled:M,children:"Cancel"}),e.jsx(x,{onClick:l,loading:M,children:N?"Save Changes":"Create Template"})]}),children:e.jsxs("div",{className:"template-form",children:[e.jsx("div",{className:"template-form-row",children:e.jsx(G,{label:"Template Name",name:"name",value:h.name,onChange:I,placeholder:"e.g., Initial Contact",error:w.name})}),e.jsx("div",{className:"template-form-row",children:e.jsx(Q,{label:"Category",name:"category",value:h.category,onChange:I,options:H,placeholder:"Select a category",error:w.category})}),e.jsx("div",{className:"template-form-row",children:e.jsx(X,{label:"Message Content",name:"content",value:h.content,onChange:I,placeholder:"Type your message template...",rows:8,error:w.content})}),e.jsxs("div",{className:"template-form-placeholders",children:[e.jsx("span",{className:"template-form-placeholders-label",children:"Click to insert placeholder:"}),e.jsx("div",{className:"template-form-placeholders-list",children:me.map(a=>e.jsx("button",{type:"button",className:"template-form-placeholder-btn",onClick:()=>s(a.key),title:a.example,children:`{{${a.key}}}`},a.key))})]})]})}),z&&e.jsx("div",{className:"delete-modal-backdrop",onClick:()=>i(null),children:e.jsxs("div",{className:"delete-modal",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"delete-modal-icon",children:e.jsx(F,{size:24})}),e.jsx("h3",{children:"Delete Template"}),e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:z.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"delete-modal-actions",children:[e.jsx(x,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(x,{variant:"danger",onClick:()=>u(z.id),children:"Delete"})]})]})})]})}const ze=[{id:"monday",label:"Monday",short:"Mon"},{id:"tuesday",label:"Tuesday",short:"Tue"},{id:"wednesday",label:"Wednesday",short:"Wed"},{id:"thursday",label:"Thursday",short:"Thu"},{id:"friday",label:"Friday",short:"Fri"},{id:"saturday",label:"Saturday",short:"Sat"},{id:"sunday",label:"Sunday",short:"Sun"}],U={interview:{enabled:!0,slotDuration:30,bookingWindow:14,days:{monday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},tuesday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},wednesday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},thursday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},friday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},saturday:{enabled:!1,slots:[]},sunday:{enabled:!1,slots:[]}},excludedDates:[]},trial:{enabled:!0,slotDuration:240,bookingWindow:14,days:{monday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},tuesday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},wednesday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},thursday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},friday:{enabled:!0,slots:[{start:"09:00",end:"17:00"}]},saturday:{enabled:!1,slots:[]},sunday:{enabled:!1,slots:[]}},excludedDates:[]}};function Ie(){const[b,m]=n.useState(U),[d,f]=n.useState("interview"),[k,r]=n.useState(!0),[j,S]=n.useState(!1),[E,N]=n.useState(!1),[g,M]=n.useState("");n.useEffect(()=>{L()},[]);const L=async()=>{try{const s=$(q,"settings","bookingAvailability"),t=await ee(s);t.exists()&&m({...U,...t.data()})}catch(s){console.error("Error loading availability:",s)}finally{r(!1)}},z=async()=>{S(!0);try{const s=$(q,"settings","bookingAvailability");await se(s,b),N(!0),setTimeout(()=>N(!1),3e3)}catch(s){console.error("Error saving availability:",s),alert("Failed to save availability settings")}finally{S(!1)}},i=b[d],h=(s,t)=>{m(l=>({...l,[d]:{...l[d],[s]:t}}))},p=(s,t)=>{m(l=>({...l,[d]:{...l[d],days:{...l[d].days,[s]:{...l[d].days[s],...t}}}}))},w=s=>{const t=i.days[s];p(s,{enabled:!t.enabled,slots:t.enabled?t.slots:[{start:"09:00",end:"17:00"}]})},y=(s,t,l,u)=>{const v=[...i.days[s].slots];v[t]={...v[t],[l]:u},p(s,{slots:v})},V=s=>{const t=i.days[s],l=t.slots[t.slots.length-1],u=l?l.end:"09:00";p(s,{slots:[...t.slots,{start:u,end:"17:00"}]})},_=(s,t)=>{const l=i.days[s];if(l.slots.length>1){const u=l.slots.filter((C,v)=>v!==t);p(s,{slots:u})}},B=()=>{g&&!i.excludedDates.includes(g)&&(h("excludedDates",[...i.excludedDates,g].sort()),M(""))},I=s=>{h("excludedDates",i.excludedDates.filter(t=>t!==s))};return k?e.jsx("div",{className:"loading-spinner",children:"Loading availability settings..."}):e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"settings-section-header",children:[e.jsx("h2",{children:"Booking Availability"}),e.jsx("p",{children:"Configure when candidates can book interviews and trial shifts"})]}),e.jsxs("div",{className:"availability-tabs",children:[e.jsxs("button",{className:`availability-tab ${d==="interview"?"active":""}`,onClick:()=>f("interview"),children:[e.jsx(J,{size:18}),"Interviews"]}),e.jsxs("button",{className:`availability-tab ${d==="trial"?"active":""}`,onClick:()=>f("trial"),children:[e.jsx(ve,{size:18}),"Trial Shifts"]})]}),e.jsx(A,{className:"availability-card",children:e.jsxs(T,{children:[e.jsx("h3",{children:"General Settings"}),e.jsxs("div",{className:"availability-general",children:[e.jsxs("label",{className:"availability-toggle",children:[e.jsx("input",{type:"checkbox",checked:i.enabled,onChange:s=>h("enabled",s.target.checked)}),e.jsx("span",{className:"toggle-slider"}),e.jsxs("span",{className:"toggle-label",children:["Enable ",d==="interview"?"interview":"trial shift"," self-booking"]})]}),e.jsxs("div",{className:"availability-options",children:[e.jsxs("div",{className:"availability-option",children:[e.jsx("label",{children:"Slot Duration"}),e.jsxs("select",{value:i.slotDuration,onChange:s=>h("slotDuration",parseInt(s.target.value)),children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:180,children:"3 hours"}),e.jsx("option",{value:240,children:"4 hours"}),e.jsx("option",{value:480,children:"Full day (8 hours)"})]})]}),e.jsxs("div",{className:"availability-option",children:[e.jsx("label",{children:"Booking Window"}),e.jsxs("select",{value:i.bookingWindow,onChange:s=>h("bookingWindow",parseInt(s.target.value)),children:[e.jsx("option",{value:7,children:"1 week ahead"}),e.jsx("option",{value:14,children:"2 weeks ahead"}),e.jsx("option",{value:21,children:"3 weeks ahead"}),e.jsx("option",{value:28,children:"4 weeks ahead"})]})]})]})]})]})}),e.jsx(A,{className:"availability-card",children:e.jsxs(T,{children:[e.jsx("h3",{children:"Weekly Schedule"}),e.jsx("p",{className:"availability-hint",children:"Set available hours for each day of the week"}),e.jsx("div",{className:"availability-days",children:ze.map(s=>{const t=i.days[s.id];return e.jsxs("div",{className:`availability-day ${t.enabled?"enabled":"disabled"}`,children:[e.jsx("div",{className:"day-header",children:e.jsxs("label",{className:"day-toggle",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:()=>w(s.id)}),e.jsx("span",{className:"toggle-slider small"}),e.jsx("span",{className:"day-name",children:s.label})]})}),t.enabled&&e.jsxs("div",{className:"day-slots",children:[t.slots.map((l,u)=>e.jsxs("div",{className:"time-slot",children:[e.jsx("input",{type:"time",value:l.start,onChange:C=>y(s.id,u,"start",C.target.value)}),e.jsx("span",{className:"slot-separator",children:"to"}),e.jsx("input",{type:"time",value:l.end,onChange:C=>y(s.id,u,"end",C.target.value)}),t.slots.length>1&&e.jsx("button",{className:"slot-remove",onClick:()=>_(s.id,u),children:e.jsx(F,{size:14})})]},u)),e.jsxs("button",{className:"add-slot-btn",onClick:()=>V(s.id),children:[e.jsx(W,{size:14}),"Add time slot"]})]}),!t.enabled&&e.jsx("div",{className:"day-unavailable",children:"Unavailable"})]},s.id)})})]})}),e.jsx(A,{className:"availability-card",children:e.jsxs(T,{children:[e.jsx("h3",{children:"Excluded Dates"}),e.jsx("p",{className:"availability-hint",children:"Block specific dates (holidays, etc.) from booking"}),e.jsxs("div",{className:"excluded-dates",children:[e.jsxs("div",{className:"add-excluded-date",children:[e.jsx(G,{type:"date",value:g,onChange:s=>M(s.target.value),min:new Date().toISOString().split("T")[0]}),e.jsxs(x,{onClick:B,disabled:!g,children:[e.jsx(W,{size:16}),"Add Date"]})]}),i.excludedDates.length>0?e.jsx("div",{className:"excluded-dates-list",children:i.excludedDates.map(s=>e.jsxs("div",{className:"excluded-date-item",children:[e.jsx("span",{children:new Date(s+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),e.jsx("button",{onClick:()=>I(s),children:e.jsx(F,{size:14})})]},s))}):e.jsx("p",{className:"no-excluded-dates",children:"No dates excluded"})]})]})}),e.jsxs("div",{className:"availability-actions",children:[E&&e.jsxs("span",{className:"save-success",children:[e.jsx(K,{size:16}),"Settings saved successfully"]}),e.jsxs(x,{onClick:z,disabled:j,children:[e.jsx(Ae,{size:16}),j?"Saving...":"Save Availability Settings"]})]})]})}const R=[{id:"whatsapp",icon:je,title:"WhatsApp Templates",description:"Manage message templates for candidate communication"},{id:"booking",icon:J,title:"Booking Availability",description:"Set available times for interviews and trial shifts"},{id:"ai-parsing",icon:be,title:"AI CV Parsing",description:"Configure Claude API for intelligent CV parsing"},{id:"profile",icon:Y,title:"Profile",description:"Manage your personal information and preferences"},{id:"notifications",icon:re,title:"Notifications",description:"Configure email and in-app notification settings"},{id:"security",icon:Ee,title:"Security",description:"Password, two-factor authentication, and sessions"},{id:"appearance",icon:we,title:"Appearance",description:"Customize the look and feel of the portal"},{id:"entities",icon:te,title:"Entities & Branches",description:"Manage pharmacy entities and branch locations",adminOnly:!0},{id:"users",icon:le,title:"User Management",description:"Invite users and manage roles and permissions",adminOnly:!0},{id:"data",icon:ke,title:"Data & Export",description:"Export data and manage system backups",adminOnly:!0}];function Ue(){const{toggleMobileMenu:b}=ae(),[m,d]=n.useState("whatsapp"),f=()=>e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"settings-section-header",children:[e.jsx("h2",{children:"AI CV Parsing"}),e.jsx("p",{children:"Intelligent candidate information extraction powered by Claude AI"})]}),e.jsx(A,{children:e.jsx(T,{children:e.jsxs("div",{className:"api-key-section",children:[e.jsx("div",{className:"api-key-status",children:e.jsxs("div",{className:"api-key-indicator configured",children:[e.jsx(K,{size:20}),e.jsx("span",{children:"AI Parsing Enabled"})]})}),e.jsxs("div",{className:"api-key-info",children:[e.jsxs("div",{className:"secure-badge",children:[e.jsx(Ne,{size:16}),e.jsx("span",{children:"Secure Server-Side Processing"})]}),e.jsx("h4",{children:"How it works"}),e.jsx("p",{children:"When you upload CVs, Claude AI automatically extracts candidate details including name, email, phone number, address, work experience, skills, and qualifications."}),e.jsx("h4",{children:"Security"}),e.jsx("p",{children:"AI parsing is handled securely on our servers. No API keys are stored in your browser, and all CV data is processed through encrypted connections."})]}),e.jsxs("div",{className:"ai-features",children:[e.jsx("h4",{children:"Extracted Information"}),e.jsxs("ul",{children:[e.jsx("li",{children:"✓ Name and contact details"}),e.jsx("li",{children:"✓ Email and phone number"}),e.jsx("li",{children:"✓ Address and postcode"}),e.jsx("li",{children:"✓ Work experience summary"}),e.jsx("li",{children:"✓ Skills and qualifications"}),e.jsx("li",{children:"✓ Pharmacy/healthcare experience detection"}),e.jsx("li",{children:"✓ Right to work status (if mentioned)"})]})]})]})})})]}),k=()=>{switch(m){case"whatsapp":return e.jsx(Me,{});case"booking":return e.jsx(Ie,{});case"ai-parsing":return f();default:const r=R.find(S=>S.id===m),j=r?.icon||Y;return e.jsxs("div",{className:"settings-placeholder",children:[e.jsx(j,{size:48}),e.jsx("h3",{children:r?.title||"Settings"}),e.jsx("p",{children:"This section will be available in a future update."})]})}};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{title:"Settings",subtitle:"Manage your account and portal preferences",onMenuClick:b}),e.jsx("div",{className:"page",children:e.jsxs("div",{className:"settings-layout",children:[e.jsx("div",{className:"settings-nav",children:R.map(r=>{const j=r.icon;return e.jsxs("button",{className:`settings-nav-item ${m===r.id?"active":""}`,onClick:()=>d(r.id),children:[e.jsx("div",{className:`settings-nav-icon ${r.adminOnly?"admin":""}`,children:e.jsx(j,{size:18})}),e.jsxs("div",{className:"settings-nav-text",children:[e.jsxs("span",{className:"settings-nav-title",children:[r.title,r.adminOnly&&e.jsx("span",{className:"settings-admin-badge",children:"Admin"})]}),e.jsx("span",{className:"settings-nav-desc",children:r.description})]})]},r.id)})}),e.jsx("div",{className:"settings-content",children:k()})]})})]})}export{Ue as default};
