import{c as p,y as a,z as m,A as C}from"./index-NO_tzWV3.js";import{u as f}from"./useQuery-4a8dzvSD.js";import{s as L,c as k,u as E,d as x,g as S}from"./jobs-BO56zigh.js";const q=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],A=p("ellipsis",q);function K(e={}){const[u,n]=a.useState([]),[i,b]=a.useState(!0),[y,r]=a.useState(null),{user:l}=m();a.useEffect(()=>{b(!0),r(null);const o=L(t=>{let s=t;if(e.category&&e.category!=="all"&&(s=s.filter(c=>c.category===e.category)),e.search){const c=e.search.toLowerCase();s=s.filter(d=>d.title.toLowerCase().includes(c)||d.location.toLowerCase().includes(c)||d.description?.toLowerCase().includes(c))}n(s),b(!1)},{status:e.status});return()=>o()},[e.status,e.category,e.search]);const g=a.useCallback(async o=>{if(!l)throw new Error("Must be logged in to create a job");try{return await k(o,l.uid)}catch(t){throw r(t.message),t}},[l]),w=a.useCallback(async(o,t)=>{try{return await E(o,t)}catch(s){throw r(s.message),s}},[]),h=a.useCallback(async o=>{try{await x(o)}catch(t){throw r(t.message),t}},[]),J=a.useCallback(()=>{r(null)},[]);return{jobs:u,loading:i,error:y,addJob:g,editJob:w,removeJob:h,clearError:J}}function T(){const{data:e,isLoading:u,error:n,refetch:i}=f({queryKey:C.jobs.stats(),queryFn:S,staleTime:6e4});return{stats:e||{total:0,active:0,paused:0,closed:0},loading:u,error:n,refetch:i}}export{A as E,T as a,K as u};
